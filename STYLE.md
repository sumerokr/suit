# HTML/CSS стиль кода

## Содержание

1. [Основные принципы](#general-principles)
2. [Отступы](#whitespace)
3. [HTML](#html)
  * [Форматирование](#html-format)
  * [Порядок атрибутов](#html-attrs)
  * [Именование](#html-naming)
  * [Практические примеры](#html-example)
4. [CSS](#css)
  * [Комментарии](#css-comments)
  * [Форматирование](#css-format)
  * [Практические примеры](#css-example)


<a name="general-principles"></a>
## 1. Основные принципы

> "Вы сослужите проекту хорошую службу, если будете осознавать, что написание
> кода только для себя — Плохая Идея. Если тысячи людей используют ваш код,
> то пишите его максимально ясным и не делайте что-то только потому,
> что спецификация языка допускает это". — Idan Gazit

* Не пытайтесь постоянно оптимизировать свой код; поддерживайте его в удобном
для чтения и понимания виде.
* Весь код в проекте должен выглядеть так, будто его создал один человек,
вне зависимости от того, сколько людей на самом деле принимали участие.

<a name="whitespace"></a>
## 2. Отступы

* Используйте отступы для улучшения читабельности.
* Используйте 4 пробела для создания отступа.
* Не используйте более 1 строки для разделения блоков.
* Удаляйте все лишние пробелы в конце строк.

Совет: настройте редактор кода так, чтобы он отображал невидимые символы.
Это позволит избегать случайных пробелов в конце строк или в пустых строках
и легче отслеживать изменения в коде.

<a name="html"></a>
## 3. HTML

<a name="html-format"></a>
### 3.1. Форматирование

* Всегда используйте имена тегов и атрибутов в нижнем регистре.
* Не используйте дополнительные отступы для "вложенных по смыслу" блоков.
* Используйте булевые атрибуты без значений (т.е. `checked` вместо
`checked="checked"`).
* Всегда используйте двойные кавычки для значений атрибутов.
* Не указывайте атрибут `type` для тегов `link`, `style`, `script`.
* Всегда закрывайте теги.

(Поддерживайте длину строки в разумных пределах, т.е. 80 символов.)

Пример:

```html
<div class="Tweet">
    <a href="{{url}}">
        <img src="{{avatar}}" alt="">
    </a>
    <p>{{text}}</p>
    <button disabled>Reply</button>
</div>
```

#### Исключения и некоторые допущения

Элементы со множественными атрибутами допускается разносить на несколько строк,
в целях улучшения читабельности и наглядности.

Пример:

```html
<a class="{{class}}"
    data-action="{{action}}"
    data-id="{{id}}"
    href="{{url}}">
    <span>{{text}}</span>
</a>
```


<a name="html-attrs"></a>
### 3.2. Порядок атрибутов

HTML атрибуты должны быть указаны в алфавитном порядке.

Пример:

```html
<a class="{{class}}" data-foo="{{name}}" href="{{url}}" id="{{id}}">{{text}}</a>
```


<a name="html-naming"></a>
### 3.3. Именование

Именование трудно, но очень важно. Оно является очень важной частью процесса
разработки и поддержки кода. Не нужно бояться переименования копонентов.

* Ипользуйте ясные, продуманные, и соответствующие имена для HTML классов.
Имена должны быть информативны как внутри HTML, так и внутри CSS файлов.
* Избегайте _систематического_ использования аббревиатур в именах классов. Не
усложняйте восприятие.

Пример с "плохими" именами:

```html
<div class="cb s-scr"></div>
```

```css
.cb {
    background: #000;
}

.cb.s-scr {
    overflow: auto;
}
```

Пример с улучшенными именами:

```html
<div class="ColumnBody is-scrollable"></div>
```

```css
.ColumnBody {
    background: #000;
}

.ColumnBody.is-scrollable {
    overflow: auto;
}
```


<a name="html-example"></a>
### 3.4. HTML практические примеры

Примеры различных подходов.

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Document</title>
        <link rel="stylesheet" href="main.css">
        <script src="main.js"></script>
    </head>
    <body>
        <article class="Post" id="1234">
            <time class="Post-timestamp">{{date}}</time>
            <a data-analytics-action="{{action}}"
                data-analytics-category="{{category}}"
                data-id="1234"
                href="{{url}}">{{text}}</a>
            <ul>
                <li>
                    <a href="{{url}}">{{text}}</a>
                    <img src="{{src}}" alt="">
                </li>
                <li>
                    <a href="{{url}}">{{text}}</a>
                </li>
            </ul>
            <a class="u-linkComplex" href="{{url}}">
                <span class="u-linkComplex-target">{{text}}</span>
                {{text}}
            </a>
            <input value="text" readonly>
        </article>
    </body>
</html>
```

<a name="css"></a>
## 4. CSS

<a name="css-comments"></a>
### 4.1. Комментарии

Хорошо откомментированный код очень важен. Потратьте время на то, чтобы описать
компоненты, особенности их работы, ограничения и то, как они были созданы.
Не заставляйте других членов команды гадать над назначением неочевидного кода.

Стиль комментариев должен быть простым и однородным для всего проекта.

* Помещайте комментарий на строке перед комментируемым фрагментом кода.
* Поддерживайте длину строки в разумных пределах, т.е. 80 символов.
* Свободно используйте комментарии для оформления разделов внутри CSS-файла.

Совет: настройте в редакторе кода горячие клавиши для быстрого набора шаблонов
комментирования.

Пример:

```css
/**
 * Короткое описание комметария в Doxygen стиле
 *
 * Первая часть описания начинается здесь и может продолжать пару строк.
 *
 * Более развернутое описание может быть изложено здесь. Допускается
 * использование HTML, ссылок и прочей информации, которая может быть полезна.
 *
 * TODO: это мини задача, которая служит напоминанием для некоторых исправлений
 *   в ближайшем будущем. Действует правило переноса строки на 80 символах и
 *   дополнительный отступ в 2 пробела.
 *
 * @tag This is a tag named 'tag'
 *
 * 1. Вспомогательное описание примененного свойства
 * 2. Еще одно вспомогательное описание, на которое можно сослаться в
 *    комментарии, дописанным в одну строку после свойства: значения;
 */

/* Комментарий тематической секции
   ========================================================================== */

/* Простой комментарий */
```

<a name="css-format"></a>
### 4.2. Форматирование

Выбранный стиль форматирования гарантирует, что код: легко читать; легко
комментировать; уменьшает вероятность возникновения ошибок.

* Используйте один селектор в строке при мультиселекторной выборке.
* Оставляйте один пробел между челектором и открывающейся фигурной скобкой.
* Используйте одну пару свойство: значение в строке.
* Оставляйте один пробел после двоетония свойста.
* Используйте скоращенные значения в нижнем регистре, если возможно, т.е. #aaa.
* Используйте одинарные и двойные кавычки единообразно. Предпочтение двойным
кавычкам, т.е. `content: ""`.
* Заключайте значения атрибутов в кавычки, т.е. `input[type="checkbox"]`.
* Избегайти указания едениц измерения там, _где это допускается_, т.е. 
`margin: 0`.
* Оставляйте пробел после каждой запятой при перечислении селекторов и свойств.
* Оставляйте точку с запятой после последнего свойства в блоке.
* Располагайте закрывающую фигурную скобку на отдельной строке.
* Разделяйте каждый блок правил одной пустой строкой.

```css
.selector-1,
.selector-2,
.selector-3[type="text"] {
    background: #fff;
    background: linear-gradient(#fff, rgba(0, 0, 0, 0.8));
    box-sizing: border-box;
    color: #333;
    display: block;
    font-family: helvetica, arial, sans-serif;
}

.selector-a,
.selector-b {
    padding: 10px;
}
```

#### Порядок декларации свойств

Группируйте свойства по трем критериям. Позиционирование, раскладка и прочее.

```css
.selector {
    /* positioning */
    position: absolute;
    z-index: 10;
    top: 0;
    left: 50px;

    /* layout */
    box-sizing: border-box;
    display: inline-block;
    width: 100%;
    
    /* rest */
    background: #000;
    border: 10px solid #333;
    color: #fff;
    font-family: sans-serif;
    font-size: 16px;
    text-align: right;
}
```

#### Исключения и некоторые допущения

К большим группам правил, состоящих из одного свойства, может применяться запись
в одну строку. В таком случае следует ставить пробел после открывающей и перед
закрывающей скобками.

```css
.selector-1 { width: 10%; }
.selector-2 { width: 20%; }
.selector-3 { width: 30%; }
```

Длинные значения свойств, разделяемые запятыми - как, например, набор градиентов
или теней - могут быть помещены на отдельной строке каждое, чтобы повысить
читабельность кода и сообщений в системе управления версиями. Формат записи
может слегка различаться, один из вариантов приведён ниже.

```css
.selector {
    background-image:
        linear-gradient(#fff, #ccc),
        linear-gradient(#f3c, #4ec);
    box-shadow:
        1px 1px 1px #000,
        2px 2px 1px 1px #ccc inset;
}
```

<a name="example"></a>
### 4.3. Практические примеры

Примеры различных подходов.

```css
/**
 * Раскладка колонок с горизонтальным скроллом.
 *
 * Создается горизонтальный ряд, содержащий колонки, выстраивающиеся в линию
 * без переносов. Колонки занимают всю доступную им высоту.
 *
 * Пример HTML:
 *
 * <div class="Grid">
 *     <div class="Grid-cell Grid-cell--3"></div>
 *     <div class="Grid-cell Grid-cell--3"></div>
 *     <div class="Grid-cell Grid-cell--3"></div>
 * </div>
 */

/**
 * Grid контейнер
 *
 * Должен содержать в себе только `.Grid-cell` потомков.
 *
 * 1. Удаляет внутренние отступы (строчные пробелы)
 * 2. Предотвращает перенос блоков
 */

.Grid {
    font-size: 0; /* 1 */
    height: 100%;
    white-space: nowrap; /* 2 */
}

/**
 * Grid ячейки
 *
 * Конкретная ширина не указывается по-умолчанию. Расширяется с помощью
 *  `.Grid-cell--n` класса.
 *
 * 1. Сбрасывает размер шрифта унаследованный от `.Grid`
 * 2. Устанавливает внутренние отступы
 * 3. Сбрасывает отступы (строчные пробелы) унаследованные от `.Grid`
 */

.Grid-cell {
    border: 2px solid #333;
    box-sizing: border-box;
    display: inline-block;
    font-size: 1rem; /* 1 */
    height: 100%;
    overflow: hidden;
    padding: 0 10px; /* 2 */
    position: relative;
    vertical-align: top;
    white-space: normal; /* 3 */
}

/* Cell состояния */

.Grid-cell.is-animating {
    background-color: #fffdec;
}

/* Cell модификаторы размеров
   ========================================================================== */

.Grid-cell--1 { width: 10%; }
.Grid-cell--2 { width: 20%; }
.Grid-cell--3 { width: 30%; }
.Grid-cell--4 { width: 40%; }
.Grid-cell--5 { width: 50%; }

/* Cell модификаторы
   ========================================================================== */

.Grid-cell--detail,
.Grid-cell--important {
    border-width: 4px;
}
```

Основано на работах
[github.com/necolas/idiomatic-html](https://github.com/necolas/idiomatic-html)
и
[github.com/necolas/idiomatic-css](https://github.com/necolas/idiomatic-css).
